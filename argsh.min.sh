#!/usr/bin/env bash
# shellcheck disable=SC2178 disable=SC2120 disable=SC1090 disable=SC2046 disable=SC2155
set -euo pipefail; ARGSH_COMMIT_SHA="3255f16965a56f42e4ef72aff42020659fad54f0"; ARGSH_VERSION="v0.2.1-26-g3255f16-dirty"
: "${ARGSH_VERSION:=unknown}";: "${ARGSH_COMMIT_SHA:=unknown}";: "${ARGSH_FIELD_WIDTH:=24}";COMMANDNAME=("$(s="${ARGSH_SOURCE:-"${0}"}"; echo "${s##*/}")");__argsh_try_builtin() { local _so _d;local -r _n="argsh.so";local -ra _builtins=(:usage :args is::array is::uninitialized is::set is::tty args::field_name to::int to::float to::boolean to::file to::string for _so in \ "${ARGSH_BUILTIN_PATH:-}" \ "${PATH_LIB:+${PATH_LIB}/${_n}}" \ "${PATH_BIN:+${PATH_BIN}/${_n}}" \ ; do [[ -n "${_so}" && -f "${_so}" ]] || continue enable -f "${_so}" "${_builtins[@]}" 2>/dev/null || continue return 0 done for _d in "${LD_LIBRARY_PATH:-}" "${BASH_LOADABLES_PATH:-}"; do [[ -n "${_d}" ]] || continue local IFS=: for _so in ${_d}; do [[ -n "${_so}" && -f "${_so}/${_n}" ]] || continue enable -f "${_so}/${_n}" "${_builtins[@]}" 2>/dev/null || continue return 0 done done return 1 } declare -i ARGSH_BUILTIN=0 if __argsh_try_builtin; then ARGSH_BUILTIN=1 unset -f import 2>/dev/null || true [[ "$(type -t import 2>/dev/null)" == "builtin" ]] || import() { declare -A _i; (( ${_i[${1}]:-} )) || { _i[${1}]=1; . "${BASH_SOURCE[0]%/*}/${1}.sh"; } } fi unset -f __argsh_try_builtin if (( ARGSH_BUILTIN )); then;unset -f is::array is::uninitialized is::set is::tty args::field_name to::int to::float to::boolean to::file to::string 2>/dev/null || true;return 0;fi;:usage() { local a26="${1}"; shift;declare -p usage &>/dev/null || local -a usage=();declare -p args &>/dev/null || local -a args=();[[ $(( ${#usage[@]} % 2 )) -eq 0 ]] || :args::_error "usage must be an associative array";[[ $(( ${#usage[@]} % 2 )) -eq 0 ]] || :args::_error "usage must be an associative array";if [[ -z ${1:-} || ${1} == "-h" || ${1} == "--help" ]];then :usage::text "${a26}";exit 0;fi;if ! (( ${#COMMANDNAME[@]} )) && [[ ${1:-} == "--argsh" ]];then echo "https://arg.sh ${ARGSH_COMMIT_SHA:-} ${ARGSH_VERSION:-}";exit 0;fi;local -A a28=();local -a a64=("${@}");local a53 a27="";while (( ${#a64[@]} ));do if [[ ${a64[0]:0:1} != "-" ]];then [[ -z "${a53:-}" ]] || break;a53="${a64[0]}";a64=("${a64[@]:1}");continue;fi;:args::parse_flag || break;a28["${a27}"]=1;done;:args::check_required_flags;local a45;for (( a67=0; a67 < ${#usage[@]}; a67+=2 ));do for a6830 in $(echo "${usage[a67]/:*}" | tr '|' "\n");do a30="${a30#\#}";[[ "${a53}" == "${a30}" ]] || continue;a27="${usage[a67]#\#}";a45="${usage[a67]/*:-}";a45="${a45#\#}";[[ "${a45}" == "${usage[a67]}" ]] || break 2;a45="${a45/|*}";break 2;done;done;[[ -n "${a45:-}" ]] || :args::error_usage "Invalid command: ${a53}";local a7=0;[[ "${a27}" != *":-"* ]] || a7=1;if (( a7 ));then declare -F -- "${a45}" >/dev/null 2>&1 || :args::error_usage "Invalid command: ${a53}";else local a16="${FUNCNAME[1]:-}";if [[ -n "${a16}" ]] && declare -F -- "${a16}::${a45}" >/dev/null 2>&1;then a45="${a16}::${a45}";elif declare -F -- "argsh::${a45}" >/dev/null 2>&1;then a45="argsh::${a45}";elif declare -F -- "${a45}" >/dev/null 2>&1;then :;else :args::error_usage "Invalid command: ${a53}";fi;fi;COMMANDNAME+=("${a27/[|:]*}");usage=("${a45}" "${a64[@]}");};:usage::text() { local a26="${1:-}";string::indent "${a26}";echo;echo "Usage: ${COMMANDNAME[*]} <command> [args]";[[ ${usage[0]:-} == '-' ]] || echo -e "\nAvailable Commands:";for (( a67=0; a67 < ${#usage[@]}; a67+=2 ));do [[ "${usage[a67]:0:1}" != "#" ]] || continue;[[ "${usage[a67]}" != "-" ]] || { echo;echo "${usage[a67+1]}";continue;};printf "  %-${ARGSH_FIELD_WIDTH}s %s\n" "${usage[a67]/[:|]*}" "${usage[a67+1]}";done;:args::text_flags;echo;echo "Use \"${COMMANDNAME[*]} <command> --help\" for more information about a command.";};:args() { local a26="${1}"; shift;declare -p args &>/dev/null || local -a args=();[[ $(( ${#args[@]} % 2 )) -eq 0 ]] || :args::_error "args must be an associative array";if [[ ${1:-} == "-h" || ${1:-} == "--help" ]];then :args::text;exit 0;fi;local a31=0 a27="" a67 a0=1;local -A a28=();local -a a64=("${@}");while (( ${#a64[@]} ));do if [[ ${a64[0]:0:1} != "-" ]];then local a42 a22;a67="$(:args::field_positional "${a0}")" || :args::error_usage "too many arguments: ${a64[0]}";a27="${args[a67]}";a42="$(args::field_name "${a27}")";a22="$(:args::field_value "${a64[0]}")" || exit "${?}";local -n a65="${a42}";if is::array "${a42}";then (( a31 )) || { a65=();a31=1;};a65+=("${a22}");else a65="${a22}";fi;a64=("${a64[@]:1}");(( ++a680 ));continue;fi;:args::parse_flag || :args::error_usage "unknown a37: ${a64[0]}";a28["${a27}"]=1;done;if a67="$(:args::field_positional "${a0}")";then a27="$(args::field_name "${args[a67]}")";if is::uninitialized "${a27}" && ! is::array "${a27}";then :args::error_usage "missing required argument: ${a27}";fi;fi;:args::check_required_flags;[[ ${#a64[@]} -eq 0 ]] || :args::error_usage "too many arguments: ${a64[*]}";};:args::text() { declare -p args &>/dev/null || return 0;local -a a2=() a17=();:args::positional;string::indent "${a26}";echo;echo "Usage:";echo "  ${COMMANDNAME[*]} ${a17[*]}";(( ${#a2[@]} == 0 )) || { echo;echo "Arguments:";for a6867 in "${a2[@]}";do [[ ${args[a67]} != "-" ]] || continue;a43="$( printf "   %-${ARGSH_FIELD_WIDTH}s%s" " " "${args[a67+1]}" | fmt::tty;)";printf "   %-${ARGSH_FIELD_WIDTH}s%s\n" "$(:args::fieldf "${args[a67]}")" "$(string::trim-left "${a43}")";done;};:args::text_flags;echo;};:args::text_flags() { local -a args=("${args[@]}");local -a a23=();array::contains 'help|h:+' "${args[@]}" || args+=('help|h:+' "Show this help message");:args::flags;(( ${#a23[@]} )) || return 0;[[ "${args[${a23[0]}]}" == "-" ]] || echo -e "\nOptions:";for a6867 in "${a23[@]}";do [[ "${args[a67]:0:1}" != "#" ]] || continue;[[ "${args[a67]}" != "-" ]] || { echo;echo "${args[a67+1]}";continue;};:args::fieldf "${args[a67]}";{ echo -n "           ";echo -e "${args[a67+1]}\n";} | fmt::tty;done;};:args::flags() { declare -p args &>/dev/null || local -a args;declare -p a23 &>/dev/null || local -a a23;for (( a67=0; a67 < "${#args[@]}"; a67+=2 ));do if [[ ${args[a67]} == *"|"* || ${args[a67]} == '-' ]];then a23+=("${a67}");fi;done;};:args::positional() { declare -p args &>/dev/null || local -a args;declare -p a2 &>/dev/null || local -a a2;declare -p a17 &>/dev/null || local -a a17;local a65;for (( a67=0; a67 < "${#args[@]}"; a67+=2 ));do [[ ${args[a67]} != *"|"* && ${args[a67]} != '-' ]] || continue;a65="$(args::field_name "${args[a67]}")";a2+=("${a67}");if is::array "${a65}";then a17+=("...${a65}");continue;fi;if ! is::uninitialized "${a65}";then a17+=("[${a65}]");continue;fi;a17+=("<${a65}>");done;};:args::parse_flag() { declare -p a64 a27 &>/dev/null || return 1;local a37="${a64[0]/=*}";if [[ ${a37:0:2} == "--" ]];then a27="$(:args::field_lookup "${a37:2}")" || return "${?}";elif [[ ${a37:0:1} == "-" ]];then a37="${a37:0:2}";a27="$(:args::field_lookup "${a37:1}")" || return "${?}";fi;:args::field_set_flag "${a27}";};:args::check_required_flags() { declare -p a28 args &>/dev/null || return 1;local a27;local -a a29;for (( a67=0; a67 < ${#args[@]}; a67+=2 ));do a27="${args[a67]}";:args::field_attrs "${a27}";if (( a29[2] )) && ! (( a29[4] ));then local -n a65="${a29[0]}";a65=0;fi;if (( a29[6] )) && [[ -z ${a28[${args[a67]}]:-} ]];then :args::error_usage "missing required a37: ${args[a67]/|*}";fi;done;};:args::field_set_flag() { local a27="${1}";declare -p a64 a37 &>/dev/null || return 1;local -a a29;:args::field_attrs "${a27}";local -n a65="${a29[0]}";local a4 a3;if (( a29[2] ));then a4=1;if [[ ${a37:0:2} == "--" ]];then a64=("${a64[@]:1}");else a64[0]="-${a64[0]:2}";[[ ${a64[0]} != "-" ]] || a64=("${a64[@]:1}");fi;fi;[[ -n ${a4:-} ]] || { a3="${a64[0]/${a37}}";if [[ ${a3} == "" ]];then (( ${#a64[@]} )) || :args::error "missing value for a37: ${a29[0]}";a4="${a64[1]}";a64=("${a64[@]:1}");else [[ "${a3:0:1}" != "=" ]] || a3="${a3:1}";a4="${a3}";fi;a4="$(:args::field_value "${a4}")" || exit "${?}";a64=("${a64[@]:1}");};if (( a29[5] ));then a65+=("${a4}");else a65="${a4}";fi;};:args::field_value() { local a22="${1}";declare -p a27 &>/dev/null || return 1;declare -p a29 &>/dev/null || { local -a a29;:args::field_attrs "${a27}";};declare -f "to::${a29[3]}" &>/dev/null || :args::_error "unknown type: ${a29[3]}";"to::${a29[3]}" "${a22}" "${a29[0]}" || :args::error_usage "invalid type (${a29[3]}): ${a22}";};:args::field_lookup() { local a27="${1}";declare -p args &>/dev/null || return 1;for (( a67=0; a67 < ${#args[@]}; a67+=2 ));do if [[ ${args[a67]} =~ (^${a27}\||\|${a27}:|\|${a27}$) ]];then echo "${args[a67]}";return 0;fi;done;return 1;};:args::field_positional() { local a6="${1:-1}";declare -p args &>/dev/null || return 1;for (( a67=0; a67 < ${#args[@]}; a67+=2 ));do if [[ ${args[a67]} != *"|"* && ${args[a67]} != '-' ]];then if is::array "$(args::field_name "${args[a67]}")" || (( --a6 == 0 ));then echo "${a67}";return 0;fi;fi;done;return 1;};args::field_name() { local a27="${1}";local a20="${2:-1}";a27="${a27/[|:]*}";a27="${a27#\#}";if (( a20 ));then a27="${a27//-/_}";fi;echo "${a27}";};:args::field_attrs() { local a27="${1}";declare -p a29 &>/dev/null || local -a a29;a29=( "" "" 0 "" 0 0 0 0 "" );local a36="+~!";local a50="${a27#*[:]}";[ "${a50}" != "${a27}" ] || a50="";a29[0]="$(args::field_name "${a27}")";a29[8]="$(args::field_name "${a27}" 0)";[[ ${a29[0]:0:1} != "#" ]] || { a29[7]=1;};local -n a65="${a29[0]}";local -a a23;mapfile -t a23 < <(echo "${a27/[:]*}" | tr '|' '\n');[[ ${#a23[@]} -eq 1 ]] || { a29[1]="${a23[1]}";};if is::array "${a29[0]}";then a29[5]=1;! is::uninitialized "${a29[0]}" || a65=();! (( ${#a65[@]} )) || a29[4]=1;elif ! is::uninitialized "${a29[0]}";then a29[4]=1;fi;while (( ${#a50} > 0 ));do if [[ ${a50:0:1} == "+" ]];then [[ -z ${a29[3]} ]] || :args::_error "cannot have multiple types: ${a29[3]} and boolean";a29[2]=1;a50="${a50:1}";continue;fi;if [[ ${a50:0:1} == "~" ]];then ! (( a29[2] )) || :args::_error "already flagged as boolean";a50="${a50:1}";a29[3]="${a50/[$a36]*}";a50="${a50:${#a29[3]}}";continue;fi;if [[ ${a50:0:1} == "!" ]];then ! (( a29[6] )) || :args::_error "field already flagged as required";a29[6]=1;a50="${a50:1}";continue;fi;echo ":args error: unknown modifier: ${a50:0:1}" >&2;exit 2;done;if [[ -z ${a29[3]} && ${a29[2]} -eq 0 ]];then a29[3]="string";fi;};:args::fieldf() { local a27="${1}";declare -p a29 &>/dev/null || { local -a a29;:args::field_attrs "${a27}";};[[ ${a27} == *"|"* ]] || { echo "${a29[8]} ${a29[3]}";return 0;};local -n a65="${a29[0]}";a18="   ";! (( a29[6] )) || a18=" ! ";if [[ -n ${a29[1]} ]];then a18+="-${a29[1]}, --${a29[8]}";else a18+="    --${a29[8]}";fi;a18+=" ";! (( a29[5] )) || a18+="...";a18+="${a29[3]}";if (( a29[4] )) && ! (( a29[2] ));then a18+=" (default: ${a65[*]})";fi;echo "${a18}";};args::run() { local a58="${1}"; shift;for (( a67=0; a67<${#}; a67++ ));do local a55="${1}"; shift;local a45="${1}"; shift;if ! (( a58 )) || (( a55 ));then "${a45}";fi;done;};array::contains() { local -r a10="${1}"; shift;for a688 in "${@}";do [[ "${a8}" != "${a10}" ]] || return 0;done;return 1;};array::join() { local -r a5="${1}"; shift;local a13;printf -v a13 "${a5}%s" "${@}";echo "${a13:${#a5}}";};array::nth() { local -n a61="${1}";local -r a59="${2}";shift 2;for (( a67=1; a67<=${#}; a67++ ));do (( a67 % a59 )) || a61+=("${!a67}");done;};bash::version() { local a21="${1:-4}";local a35="${2:-3}";local a32="${3:-0}";if [[ "${BASH_VERSINFO[0]}" -lt "${a21}" ]];then return 1;elif [[ "${BASH_VERSINFO[0]}" -gt "${a21}" ]];then return 0;fi;if [[ "${BASH_VERSINFO[1]}" -lt "${a35}" ]];then return 1;elif [[ "${BASH_VERSINFO[1]}" -gt "${a35}" ]];then return 0;fi;if [[ "${BASH_VERSINFO[2]}" -lt "${a32}" ]];then return 1;fi;return 0;};binary::exists() { local a14="${1}";command -v "${a14}" &> /dev/null || { echo "${a14} is required to run this script" >&2;return 1;};};binary::github() { local a44="${1}";local -r a14="$(basename "${a44}")";local a41="${2}";local a48="${3}";local a56="${4:-}";curl -Lso /dev/stdout "https://github.com/${a41}/releases/download/${a48}" | { if [[ -n "${a56}" ]];then tar -xz -C "$(dirname "${a44}")" "${a56}";else tee "${a44}" &> /dev/null;fi;chmod +x "${a44}";};};binary::arch() { local a24="${1}";local -r a49="$(uname -m)";case "${a49}" in
x86_64|amd64)if (( a24 )); then echo "64-bit"; else echo "amd64"; fi;;
armv7l)echo "arm";;
aarch64)echo "arm64";;
*)echo "${a49}";;
esac;};binary::jq() { binary::exists "jq" 2>/dev/null || { local -r a11="$(github::latest "stedolan/jq")" system="$(uname -s)";binary::github "${PATH_BIN?}/jq" "stedolan/jq" "${a11}/jq-${system,,}-$(binary::arch)";};};binary::vale() { binary::exists "vale" 2>/dev/null || { local -r a11="$(github::latest "errata-ai/vale")" system="$(uname -s)";binary::github "${PATH_BIN?}/vale" "errata-ai/vale" "${a11}/vale_${a11:1}_$(uname -s)_$(binary::arch 1).tar.gz" "vale";};};docker::user() { local a63="${1:-"$(id -u)"}";local a60="${2:-"$(id -g)"}";local a47="${3:-"$(whoami)"}";local a40="${4:-"/workspace"}";local a25="${5:-"/bin/sh"}";local a46;a46="$(pwd)";a46="${a46#"${PATH_BASE:-}"}";if [[ "${a46}" == "$(pwd)" ]];then a46="${a40}";else a46="${a40}${a46}";fi;echo "${a47}:x:${a63}:${a60}::${a40}:${a25}" > /tmp/docker_passwd;echo "${a47}:x:${a60}:" > /tmp/docker_group;echo "-v /tmp/docker_passwd:/etc/passwd -v /tmp/docker_group:/etc/group";echo "-u ${a63}:${a60}";echo "-v ${PATH_BASE:-"$(pwd)"}:${a40}";echo "-w ${a46}";};error::stacktrace() { local -r a51="${1:-${?}}";if (( a51 ));then echo -e "\n\033[38;5;196m■■ Stacktrace(${a51}): \e[1m${BASH_COMMAND}\e[22m";for a6867 in $(seq 1 $((${#FUNCNAME[@]} - 2)));do echo -e "${a67}. ${BASH_SOURCE[a67]}:${BASH_LINENO[a67-1]} ➜ ${FUNCNAME[a67]}()";done;echo -e "\033[0m";return "${a51}";fi;};:args::_error() { declare -p a27 &>/dev/null || local a27="???";echo ":args error [${a27}] ➜ ${1}" >&2;exit 2;};:args::error() { declare -p a27 &>/dev/null || local a27="???";echo -e "[ ${a27/[:|]*} ] invalid argument\n➜ ${1}\n" >&2;exit 2;};:args::error_usage() { declare -p a27 &>/dev/null || local a27="???";echo -e "[ ${a27/[:|]*} ] invalid usage\n➜ ${1}\n" >&2;echo -e "Use \"${0##*/} -h\" for more information" >&2;exit 2;};fmt::tty() { local a66="${1:-"$(cat)"}";if ! command -v fmt &>/dev/null || [[ ! -t 1 ]];then echo "${a66}";return 0;fi;local a39;a39="$(tput cols)";echo "${a66}" | fmt -w "${a39}";};github::latest() { local a41="${1}";curl -fsSLI -o /dev/null -w "%{url_effective}" "https://github.com/${a41}/releases/latest" | rev | cut -d'/' -f1 | rev;};declare -gA a1=();local a54="${1}";(( ${a1["${a54}"]:-} )) || { a1["${a54}"]=1;if [[ ${a54:0:1} == "@" ]];then a54="${PATH_BASE:?"PATH_BASE missing"}/${a54:1}";elif [[ ${a54:0:1} == "~" ]];then local _s="${ARGSH_SOURCE:-${BASH_SOURCE[-1]}}";a54="${_s%/*}/${a54:1}";else local _s="${ARGSH_SOURCE:-${BASH_SOURCE[0]}}";a54="${_s%/*}/${a54}";fi;import::source "${a54}" || exit 1;};};import::source() { local a54="${1}";for a6852 in "" ".sh" ".bash";do if [[ -f "${a54}${a52}" ]];then . "${a54}${a52}";return;fi;done;echo "Library not found ${a54}" >&2;return 1;};import::clear() { a1=();};is::tty() { [[ -t 1 ]];};is::array() { declare -p "${1}" &>/dev/null && [[ $(declare -p "${1}") == "declare -a"* ]];};is::uninitialized() { local a57="${1}";if is::array "${a57}";then [[ $(declare -p "${a57}") == "declare -a ${a57}" ]];else [[ ! ${!a57+x} ]];fi;};is::set() { ! is::uninitialized "${1}";};argsh::try_builtin() { local _so _d;local -r _n="argsh.so";local -ra _builtins=(:usage :args is::array is::uninitialized is::set is::tty args::field_name to::int to::float to::boolean to::file to::string if [[ -n "${1:-}" ]]; then [[ -f "${1}" ]] || return 1 enable -f "${1}" "${_builtins[@]}" 2>/dev/null || return 1 return 0 fi for _so in \ "${ARGSH_BUILTIN_PATH:-}" \ "${PATH_LIB:+${PATH_LIB}/${_n}}" \ "${PATH_BIN:+${PATH_BIN}/${_n}}" \ ; do [[ -n "${_so}" && -f "${_so}" ]] || continue enable -f "${_so}" "${_builtins[@]}" 2>/dev/null || continue return 0 done for _d in "${LD_LIBRARY_PATH:-}" "${BASH_LOADABLES_PATH:-}"; do [[ -n "${_d}" ]] || continue local IFS=: for _so in ${_d}; do [[ -n "${_so}" && -f "${_so}/${_n}" ]] || continue enable -f "${_so}/${_n}" "${_builtins[@]}" 2>/dev/null || continue return 0 done done return 1 } argsh::shebang() { local _argsh_builtin_mode="" _argsh_builtin_a44="" local -a _argsh_imports=();while [[ "${1:-}" == -* ]];do case "${1}" in
--builtin)_argsh_builtin_mode="required";shift;if [[ -n "${1:-}" && "${1:0:1}" != "-" && "${1}" == *.so ]];then _argsh_builtin_a44="${1}";shift;fi;;
--no-builtin)_argsh_builtin_mode="disabled";shift;;
--import|-i)shift;[[ -n "${1:-}" ]] || { echo "argsh: --import requires an argument" >&2; return 1; };_argsh_imports+=("${1}");shift;;
--version)echo "argsh ${ARGSH_VERSION:-unknown} (${ARGSH_COMMIT_SHA:-unknown})";return 0;;
--)shift; break;;
*)break;;
esac;done;local -r a48="${1}";: "${ARGSH_SOURCE="${a48}"}";export ARGSH_SOURCE;[[ "${BASH_SOURCE[-1]}" != "${a48}" && -f "${a48}" ]] || { binary::exists docker || { echo "This script requires Docker to be installed";return 1;} >&2;local a62="";! tty -s || a62="-it";docker run --rm ${a62} $(docker::user) -e "BATS_LOAD" -e "ARGSH_SOURCE" -e "GIT_COMMIT_SHA=$(git rev-parse HEAD 2>/dev/null || :)" -e "GIT_VERSION=$(git describe --tags --dirty 2>/dev/null || :)" ghcr.io/arg-sh/argsh:latest "${@}";return 0;};bash::version 4 3 0 || { echo "This script requires bash 4.3.0 or later";return 1;} >&2;declare -gi ARGSH_BUILTIN=0;case "${_argsh_builtin_mode}" in
required)argsh::try_builtin "${_argsh_builtin_path}" || { echo "argsh: failed to load builtins${_argsh_builtin_path:+: ${_argsh_builtin_path}}" >&2;return 1;};ARGSH_BUILTIN=1;;
disabled);;
*)argsh::try_builtin && ARGSH_BUILTIN=1;;
esac;local _lib;for _lib in "${_argsh_imports[@]}";do done;shift;. "${a48}";};string::drop-index() { local a9="${1}";local a34="${2}";local a12="${3:-1}";echo "${a9:0:a34}${a9:a34+a12}";};string::random() { local a12="${1:-42}";local a33="${2:-"a-zA-Z0-9"}";local a66;until [[ "${a66:-}" =~ ^[:alpha:] ]];do a66=$(tr -dc "${a33}" < /dev/urandom | fold -w "${a12}" | head -n 1 || :);done;echo "${a66}";};string::indent() { local a9="${1:-'-'}";local a15="${2:-0}";local a38 a19;[[ ${a9} != '-' ]] || a9="$(cat)";mapfile -t a19 < <(echo "${a9}");for a6838 in "${a19[@]}";do a38="$(string::trim-left "${a38}")";(( a15 == 0 )) || printf "%${a15}s" " ";echo "${a38}";done;};string::trim-left() { local a9="${1}";local a33="${2:-" "$'\n'$'\t'}";[[ -n ${a9:-} ]] || return 0;[[ ${a9} != '-' ]] || a9="$(cat)";while [[ -n "${a9}" ]];do [[ ${a33} == *${a9:0:1}* ]] || break;a9="${a9:1}";done;echo "${a9}";};string::trim-right() { local a9="${1:-'-'}";local a33="${2:-" "$'\n'$'\t'}";[[ ${a9} != '-' ]] || a9="$(cat)";while [[ -n "${a9}" ]];do [[ ${a33} == *${a9: -1}* ]] || break;a9="${a9:0: -1}";done;echo "${a9}";};string::trim() { local a9="${1:-'-'}";local a33="${2:-" "$'\n'$'\t'}";[[ ${a9} != '-' ]] || a9="$(cat)";echo "${a9}" | string::trim-left - "${a33}" | string::trim-right - "${a33}";};to::string() { local a22="${1}";echo "${a22}";};to::boolean() { local a22="${1}";case "${a22}" in
""|"false"|"0")a22="0";;
*)a22="1";;
esac;echo "${a22}";};to::int() { local a22="${1}";[[ ${a22} =~ ^-?[0-9]+$ ]] || return 1;echo "${a22}";};to::float() { local a22="${1}";[[ ${a22} =~ ^-?[0-9]+(\.[0-9]+)?$ ]] || return 1;echo "${a22}";};to::stdin() { local a22="${1}";[[ ${a22} != "-" ]] || a22="$(cat)";echo "${a22}";};to::file() { local a22="${1}";[[ -f "${a22}" ]] || return 1;echo "${a22}";};[[ "${BASH_SOURCE[0]}" != "${0}" ]] || argsh::shebang "${@}"